--- emacs/src/Makefile.orig	2005-01-16 19:25:13.000000000 -0800
+++ emacs/src/Makefile	2005-01-16 19:43:02.000000000 -0800
@@ -63,7 +63,7 @@
 # ========================== start of cpp stuff =======================
 C_SWITCH_SYSTEM=
 SHELL=/bin/sh
-STARTFILES = pre-crt0.o /usr/lib/crt1.o /usr/lib/crti.o
+STARTFILES = pre-crt0.o $(TARGET_LIBDIR)/crt1.o $(TARGET_LIBDIR)/crti.o
 TOOLKIT_DEFINES =
 ALL_CFLAGS=-Demacs -DHAVE_CONFIG_H $(TOOLKIT_DEFINES) $(MYCPPFLAGS) -I. -I${srcdir} -D_BSD_SOURCE ${CFLAGS}
 .c.o:
@@ -84,7 +84,7 @@
 lisp= ${lispsource}abbrev.elc ${lispsource}buff-menu.elc ${lispsource}byte-run.elc ${lispsource}cus-start.el ${lispsource}custom.elc ${lispsource}emacs-lisp/lisp-mode.elc ${lispsource}emacs-lisp/lisp.elc ${lispsource}env.elc ${lispsource}faces.elc ${lispsource}files.elc ${lispsource}format.elc ${lispsource}facemenu.elc ${lispsource}float-sup.elc ${lispsource}frame.elc ${lispsource}help.elc ${lispsource}indent.elc ${lispsource}isearch.elc ${lispsource}loadup.el ${lispsource}loaddefs.el ${lispsource}bindings.elc ${lispsource}map-ynp.elc ${lispsource}menu-bar.elc ${lispsource}international/mule.elc ${lispsource}international/mule-conf.el ${lispsource}international/mule-cmds.elc ${lispsource}international/characters.elc ${lispsource}international/utf-8.elc ${lispsource}international/utf-16.elc ${lispsource}international/latin-1.el ${lispsource}international/latin-2.el ${lispsource}international/latin-3.el ${lispsource}international/latin-4.el ${lispsource}international/latin-5.el ${lispsource}international/latin-8.el ${lispsource}international/latin-9.el ${lispsource}case-table.elc ${lispsource}language/chinese.elc ${lispsource}language/cyrillic.elc ${lispsource}language/indian.elc ${lispsource}language/devanagari.elc ${lispsource}language/english.elc ${lispsource}language/ethiopic.elc ${lispsource}language/european.elc ${lispsource}language/czech.elc ${lispsource}language/slovak.elc ${lispsource}language/romanian.elc ${lispsource}language/greek.elc ${lispsource}language/hebrew.elc ${lispsource}language/japanese.elc ${lispsource}language/korean.elc ${lispsource}language/lao.elc ${lispsource}language/thai.elc ${lispsource}language/tibetan.elc ${lispsource}language/vietnamese.elc ${lispsource}language/misc-lang.elc ${lispsource}international/ucs-tables.elc ${lispsource}paths.el ${lispsource}register.elc ${lispsource}replace.elc ${lispsource}simple.elc ${lispsource}startup.elc ${lispsource}subr.elc ${lispsource}term/tty-colors.elc ${lispsource}textmodes/fill.elc ${lispsource}textmodes/page.elc ${lispsource}textmodes/paragraphs.elc ${lispsource}textmodes/text-mode.elc ${lispsource}vc-hooks.elc ${lispsource}ediff-hook.elc ${lispsource}widget.elc ${lispsource}window.elc ${lispsource}version.el
 shortlisp= ../lisp/abbrev.elc ../lisp/buff-menu.elc ../lisp/byte-run.elc ../lisp/cus-start.el ../lisp/custom.elc ../lisp/emacs-lisp/backquote.elc ../lisp/emacs-lisp/lisp-mode.elc ../lisp/emacs-lisp/lisp.elc ../lisp/facemenu.elc ../lisp/faces.elc ../lisp/files.elc ../lisp/float-sup.elc ../lisp/format.elc ../lisp/frame.elc ../lisp/help.elc ../lisp/indent.elc ../lisp/isearch.elc ../lisp/loadup.el ../lisp/loaddefs.el ../lisp/bindings.elc ../lisp/map-ynp.elc ../lisp/env.elc ../lisp/international/mule.elc ../lisp/international/mule-conf.el ../lisp/international/mule-cmds.elc ../lisp/international/characters.elc ../lisp/international/utf-8.elc ../lisp/international/utf-16.elc ../lisp/international/latin-1.el ../lisp/international/latin-2.el ../lisp/international/latin-3.el ../lisp/international/latin-4.el ../lisp/international/latin-5.el ../lisp/international/latin-8.el ../lisp/international/latin-9.el ../lisp/case-table.elc ../lisp/language/chinese.elc ../lisp/language/cyrillic.elc ../lisp/language/indian.elc ../lisp/language/devanagari.elc ../lisp/language/english.elc ../lisp/language/ethiopic.elc ../lisp/language/european.elc ../lisp/language/czech.elc ../lisp/language/slovak.elc ../lisp/language/romanian.elc ../lisp/language/greek.elc ../lisp/language/hebrew.elc ../lisp/language/japanese.elc ../lisp/language/korean.elc ../lisp/language/lao.elc ../lisp/language/thai.elc ../lisp/language/tibetan.elc ../lisp/language/vietnamese.elc ../lisp/language/misc-lang.elc ../lisp/international/ucs-tables.elc ../lisp/menu-bar.elc ../lisp/paths.el ../lisp/register.elc ../lisp/replace.elc ../lisp/simple.elc ../lisp/startup.elc ../lisp/subr.elc ../lisp/term/tty-colors.elc ../lisp/textmodes/fill.elc ../lisp/textmodes/page.elc ../lisp/textmodes/paragraphs.elc ../lisp/textmodes/text-mode.elc ../lisp/vc-hooks.elc ../lisp/ediff-hook.elc ../lisp/widget.elc ../lisp/window.elc ../lisp/version.el
 SOME_MACHINE_LISP = ${dotdot}/lisp/mouse.elc ${dotdot}/lisp/select.elc ${dotdot}/lisp/scroll-bar.elc ${dotdot}/lisp/vmsproc.elc ${dotdot}/lisp/vms-patch.elc ${dotdot}/lisp/ls-lisp.elc ${dotdot}/lisp/dos-fns.elc ${dotdot}/lisp/w32-fns.elc ${dotdot}/lisp/dos-w32.elc ${dotdot}/lisp/disp-table.elc ${dotdot}/lisp/dos-vars.elc ${dotdot}/lisp/international/ccl.elc ${dotdot}/lisp/international/codepage.elc
-LIBES = $(LOADLIBES) $(LIBS) $(LIBX) $(LIBSOUND) -lncurses $(GETLOADAVG_LIBS) $(GNULIB_VAR) -lm -lgcc -lc -lgcc /usr/lib/crtn.o $(GNULIB_VAR)
+LIBES = $(LOADLIBES) $(LIBS) $(LIBX) $(LIBSOUND) -lncurses $(GETLOADAVG_LIBS) $(GNULIB_VAR) -lm -lgcc -lc -lgcc $(TARGET_LIBDIR)/crtn.o $(GNULIB_VAR)
 all: emacs
 emacs: temacs ${etc}DOC ${lisp}
 	       LC_ALL=C ./temacs -batch -l loadup dump
@@ -96,7 +96,7 @@
 ${libsrc}make-docfile:
 	       cd ${libsrc}; ${MAKE} ${MFLAGS} make-docfile
 temacs: $(LOCALCPP) $(STARTFILES) stamp-oldxmenu ${obj} ${otherobj} prefix-args
-	       $(LD) `./prefix-args -Xlinker ${STARTFLAGS} ${ALL_LDFLAGS}` -o temacs ${STARTFILES} ${obj} ${otherobj} ${LIBES}
+	       $(LD) -Xlinker -z -Xlinker nocombreloc $(LDFLAGS) -o temacs ${STARTFILES} ${obj} ${otherobj} ${LIBES}
 prefix-args: prefix-args.c $(config_h)
 	       $(CC) $(ALL_CFLAGS) $(LDFLAGS) ${srcdir}/prefix-args.c -o prefix-args
 stamp-oldxmenu:
