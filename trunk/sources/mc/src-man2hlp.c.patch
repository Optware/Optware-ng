--- mc/src/man2hlp.c.orig	2010-01-27 10:53:46.000000000 +0000
+++ mc/src/man2hlp.c	2010-02-12 03:54:18.088623066 +0000
@@ -22,15 +22,11 @@
  *  \brief Source: man page to help file converter
  */
 
-#include <config.h>
-
 #include <stdarg.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 
-#include <glib.h>
-
 #include "help.h"
 
 #define BUFFER_SIZE 256
@@ -149,7 +145,7 @@
 
     f = fopen (filename, flags);
     if (f == NULL) {
-	g_snprintf (tmp, sizeof (tmp), "man2hlp: Cannot open file \"%s\"",
+	snprintf (tmp, sizeof (tmp), "man2hlp: Cannot open file \"%s\"",
 		    filename);
 	perror (tmp);
 	exit (3);
@@ -293,7 +289,7 @@
     char buffer[BUFFER_SIZE];
 
     va_start (args, format);
-    g_vsnprintf (buffer, sizeof (buffer), format, args);
+    vsnprintf (buffer, sizeof (buffer), format, args);
     va_end (args);
     print_string (buffer);
 }
@@ -587,7 +583,7 @@
     } else {
 	/* Other commands are ignored */
 	char warn_str[BUFFER_SIZE];
-	g_snprintf (warn_str, sizeof (warn_str),
+	snprintf (warn_str, sizeof (warn_str),
 		    "Warning: unsupported command %s", buffer);
 	print_error (warn_str);
 	return;
@@ -618,7 +614,7 @@
 	/* Bold text or italics text */
 	if (buffer[0] == '.' && (buffer[1] == 'I' || buffer[1] == 'B'))
 	    for (buffer += 2; *buffer == ' ' || *buffer == '\t'; buffer++);
-	g_strlcpy (old, buffer, sizeof (old));
+	strncpy (old, buffer, sizeof (old));
 	link_flag = 3;
 	break;
     case 3:
@@ -816,7 +812,7 @@
 	    }
 	}
 	if (!found) {
-	    g_snprintf (buffer, sizeof (buffer), "Stale link \"%s\"",
+	    snprintf (buffer, sizeof (buffer), "Stale link \"%s\"",
 			current_link->linkname);
 	    c_in = current_link->filename;
 	    in_row = current_link->line;
