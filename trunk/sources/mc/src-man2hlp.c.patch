--- mc-4.6.2/src/man2hlp.c.orig	2009-02-01 19:30:21.000000000 +0000
+++ mc-4.6.2/src/man2hlp.c	2009-03-04 04:42:53.466522749 +0000
@@ -18,17 +18,12 @@
    along with this program; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.  */
 
-#include <config.h>
-
 #include <stdarg.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 
-#include <glib.h>
-
 #include "help.h"
-#include "glibcompat.h"
 
 #define BUFFER_SIZE 256
 
@@ -146,7 +141,7 @@
 
     f = fopen (filename, flags);
     if (f == NULL) {
-	g_snprintf (tmp, sizeof (tmp), "man2hlp: Cannot open file \"%s\"",
+	snprintf (tmp, sizeof (tmp), "man2hlp: Cannot open file \"%s\"",
 		    filename);
 	perror (tmp);
 	exit (3);
@@ -290,7 +285,7 @@
     char buffer[BUFFER_SIZE];
 
     va_start (args, format);
-    g_vsnprintf (buffer, sizeof (buffer), format, args);
+    vsnprintf (buffer, sizeof (buffer), format, args);
     va_end (args);
     print_string (buffer);
 }
@@ -584,7 +579,7 @@
     } else {
 	/* Other commands are ignored */
 	char warn_str[BUFFER_SIZE];
-	g_snprintf (warn_str, sizeof (warn_str),
+	snprintf (warn_str, sizeof (warn_str),
 		    "Warning: unsupported command %s", buffer);
 	print_error (warn_str);
 	return;
@@ -615,7 +610,7 @@
 	/* Bold text or italics text */
 	if (buffer[0] == '.' && (buffer[1] == 'I' || buffer[1] == 'B'))
 	    for (buffer += 2; *buffer == ' ' || *buffer == '\t'; buffer++);
-	g_strlcpy (old, buffer, sizeof (old));
+	strncpy (old, buffer, sizeof (old));
 	link_flag = 3;
 	break;
     case 3:
@@ -813,7 +808,7 @@
 	    }
 	}
 	if (!found) {
-	    g_snprintf (buffer, sizeof (buffer), "Stale link \"%s\"",
+	    snprintf (buffer, sizeof (buffer), "Stale link \"%s\"",
 			current_link->linkname);
 	    c_in = current_link->filename;
 	    in_row = current_link->line;
