			     BASH PATCH REPORT
			     =================

Bash-Release: 3.2
Patch-ID: bash32-051

Bug-Reported-by:	werner@suse.de
Bug-Reference-ID:	<201002251238.o1PCcYcg016893@boole.suse.de>
Bug-Reference-URL:	http://lists.gnu.org/archive/html/bug-bash/2010-02/msg00132.html

Bug-Description:

When the `read' builtin times out after the timeout specified with -t is
exceeded, it does not reset the flags that tell signal handlers to process
signals immediately instead of deferring their handling.  This can result
in unsafe functions being called from signal handlers, which can cause bash
to hang or dump core.

Patch:

*** ../bash-3.2-patched/builtins/read.def	2008-04-29 21:25:00.000000000 -0400
--- builtins/read.def	2010-03-17 09:50:51.000000000 -0400
***************
*** 327,330 ****
--- 327,332 ----
        if (code)
  	{
+ 	  interrupt_immediately--;
+ 	  terminate_immediately = 0;
  	  run_unwind_frame ("read_builtin");
  	  return (EXECUTION_FAILURE);
*** ../bash-3.2/patchlevel.h	Thu Apr 13 08:31:04 2006
--- patchlevel.h	Mon Oct 16 14:22:54 2006
***************
*** 26,30 ****
     looks for to find the patch level (for the sccs version string). */
  
! #define PATCHLEVEL 50
  
  #endif /* _PATCHLEVEL_H_ */
--- 26,30 ----
     looks for to find the patch level (for the sccs version string). */
  
! #define PATCHLEVEL 51
  
  #endif /* _PATCHLEVEL_H_ */
