--- erlang/erts/emulator/Makefile.in.orig	2007-03-27 06:26:54.000000000 -0700
+++ erlang/erts/emulator/Makefile.in	2007-05-24 13:58:45.000000000 -0700
@@ -830,9 +830,10 @@
 	$(CC) $(subst O2,O3, $(CFLAGS)) $(INCLUDES) -c $< -o $@
 
 $(BINDIR)/hipe_mkliterals$(TF_MARKER):	$(OBJDIR)/hipe_mkliterals.o
-	$(CC) $(CFLAGS) $(INCLUDES) -o $@ $<
+	gcc $(CFLAGS) $(INCLUDES) -o $@ $<
 
 $(OBJDIR)/hipe_mkliterals.o:	$(TTF_DIR)/hipe_x86_asm.h $(TTF_DIR)/hipe_ppc_asm.h
+	gcc $(CFLAGS) $(INCLUDES) -o $@ -c hipe/hipe_mkliterals.c
 
 $(TTF_DIR)/hipe_literals.h:	$(BINDIR)/hipe_mkliterals$(TF_MARKER)
 	$(BINDIR)/hipe_mkliterals$(TF_MARKER) -c > $@
--- erlang/erts/emulator/hipe/hipe_process.h.orig	2007-05-24 11:54:04.000000000 -0700
+++ erlang/erts/emulator/hipe/hipe_process.h	2007-05-24 11:57:11.000000000 -0700
@@ -24,11 +24,11 @@
                                         To find the first stack descriptor
 					at GC or exception. */
 #endif
-#if defined(__i386__) || defined(__x86_64__)
+#if 0 /* defined(__i386__) || defined(__x86_64__) */
     Eterm *ncsp;		/* Saved C stack pointer. */
     unsigned int narity;
 #endif
-#if defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__)
+#if 1 /* defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__) */
     void (*nra)(void);		/* Native code return address. */
     unsigned int narity;	/* Arity of BIF call, for stack walks. */
 #endif
@@ -44,10 +44,10 @@
     p->nstgraylim = NULL;
     p->nstblacklim = NULL;
     p->ngra = NULL;
-#if defined(__sparc__) || defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__)
+#if 1 /* defined(__sparc__) || defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__) */
     p->nra = NULL;
 #endif
-#if defined(__i386__) || defined(__x86_64__) || defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__)
+#if 1 /* defined(__i386__) || defined(__x86_64__) || defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__) */
     p->narity = 0;
 #endif
 }
--- erlang/erts/emulator/hipe/hipe_mkliterals.c.orig	2007-05-24 11:54:12.000000000 -0700
+++ erlang/erts/emulator/hipe/hipe_mkliterals.c	2007-05-24 11:58:51.000000000 -0700
@@ -259,11 +259,11 @@
 #if defined(__sparc__)
     { "P_NSP_LIMIT", offsetof(struct process, hipe.nstend) },
     { "P_NRA", offsetof(struct process, hipe.nra) },
-#elif defined(__i386__) || defined(__x86_64__)
+#elif 0 /* defined(__i386__) || defined(__x86_64__) */
     { "P_NSP_LIMIT", offsetof(struct process, hipe.nstack) },
     { "P_CSP", offsetof(struct process, hipe.ncsp) },
     { "P_NARITY", offsetof(struct process, hipe.narity) },
-#elif defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__)
+#elif 1 /* defined(__powerpc__) || defined(__ppc__) || defined(__powerpc64__) || defined(__arm__) */
     { "P_NSP_LIMIT", offsetof(struct process, hipe.nstack) },
     { "P_NRA", offsetof(struct process, hipe.nra) },
     { "P_NARITY", offsetof(struct process, hipe.narity) },
